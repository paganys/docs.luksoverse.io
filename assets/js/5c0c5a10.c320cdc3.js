"use strict";(self.webpackChunkcommunity_docs=self.webpackChunkcommunity_docs||[]).push([[3445],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(n),h=o,y=p["".concat(l,".").concat(h)]||p[h]||d[h]||i;return n?a.createElement(y,r(r({ref:t},u),{},{components:n})):a.createElement(y,r({ref:t},u))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},3307:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=n(7462),o=(n(7294),n(3905));const i={},r="Configuring a Login Key",s={unversionedId:"mainnet/complete-node-guide/access-connection/key-login",id:"mainnet/complete-node-guide/access-connection/key-login",title:"Configuring a Login Key",description:"In the next step, we will significantly increase the security of the node access flow by using SSH keys for authentication instead of the direct password.",source:"@site/docs/mainnet/complete-node-guide/5-access-connection/04-key-login.md",sourceDirName:"mainnet/complete-node-guide/5-access-connection",slug:"/mainnet/complete-node-guide/access-connection/key-login",permalink:"/docs/mainnet/complete-node-guide/access-connection/key-login",draft:!1,editUrl:"https://github.com/Luksoverse/community-docs/tree/main/packages/create-docusaurus/templates/shared/docs/mainnet/complete-node-guide/5-access-connection/04-key-login.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Test the SSH Connection",permalink:"/docs/mainnet/complete-node-guide/access-connection/ssh-test"},next:{title:"Enable Secure Authentication",permalink:"/docs/mainnet/complete-node-guide/access-connection/secure-auth"}},l={},c=[{value:"SSH Keys",id:"ssh-keys",level:4},{value:"Keys in Traveling Situations",id:"keys-in-traveling-situations",level:4},{value:"SSH Key Generation Tool",id:"ssh-key-generation-tool",level:4},{value:"5.4.1 Checking for existing keys",id:"541-checking-for-existing-keys",level:2},{value:"5.4.2 Creating a new key",id:"542-creating-a-new-key",level:3},{value:"RSA Cryptography",id:"rsa-cryptography",level:4},{value:"5.4.3 Defining a Key Name",id:"543-defining-a-key-name",level:3},{value:"5.4.4 Adding a passphrase",id:"544-adding-a-passphrase",level:3},{value:"5.4.5 Backing up the private key",id:"545-backing-up-the-private-key",level:3},{value:"5.4.6 Copying the public key to the node",id:"546-copying-the-public-key-to-the-node",level:3},{value:"5.4.7 Checking for the added keys",id:"547-checking-for-the-added-keys",level:3}],u={toc:c};function d(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"configuring-a-login-key"},"Configuring a Login Key"),(0,o.kt)("p",null,"In the next step, we will significantly increase the security of the node access flow by using SSH keys for authentication instead of the direct password."),(0,o.kt)("h4",{id:"ssh-keys"},"SSH Keys"),(0,o.kt)("p",null,"SSH keys are a widely used cryptographic method for providing secure and passwordless authentication between a client and a server. They are based on public-key cryptography, where a pair of keys is generated: one private key, which should be kept secret, and one public key, which can be freely shared."),(0,o.kt)("p",null,"Using SSH keys involves generating a key pair on the client machine and copying the public key to the server. When the client attempts to authenticate with the server, it will prove its identity by performing a cryptographic operation with the private key. The server can verify this operation using the public key without seeing the private key. This authentication method is more secure than using passwords and more convenient, as it eliminates the need to remember and enter complex passwords."),(0,o.kt)("h4",{id:"keys-in-traveling-situations"},"Keys in Traveling Situations"),(0,o.kt)("p",null,"It's crucial to ensure the key's safety when storing your private SSH key, especially while traveling or when your device may be damaged or lost. Here are some recommendations:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Backup"),": Always create a backup of your private key and store it in a secure and separate location. The backup could be an encrypted USB drive, a cloud storage service, or a hardware security device like a YubiKey."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Encryption"),": Protect your private key with a strong passphrase. Encryption adds an extra layer of security by requiring the passphrase to be entered before the key can be used, even if someone gains access to the file.")),(0,o.kt)("p",null,"If you want to go crazy on security, the following might be something to consider. It's a bit exaggerated because all keys are encrypted on your node, and there is no critical or dangerous data on it if you choose strong passwords for your validator wallet."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Hardware Tokens"),": You could consider using hardware tokens like YubiKey or other FIDO U2F devices, which store your private key securely on a physical device. These devices protect cryptographic keys from theft or unauthorized access and can be carried while traveling.")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Ledger supports the FIDO application, and you could use your Ledger device to log into your node, not only to protect the validator's withdrawal and fee addresses.")),(0,o.kt)("h4",{id:"ssh-key-generation-tool"},"SSH Key Generation Tool"),(0,o.kt)("p",null,"SSH-Keygen is a widely used command-line tool for generating, managing, and converting SSH public and private key pairs. It is an integral part of the OpenSSH suite, which provides secure and encrypted communication over a network using the SSH protocol."),(0,o.kt)("h2",{id:"541-checking-for-existing-keys"},"5.4.1 Checking for existing keys"),(0,o.kt)("p",null,"If you have already created keys before, let's check the default\ndirectory for them."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Adjust the command accordingly if you have set up a custom path for the key.")),(0,o.kt)("p",null,"The default location is the ",(0,o.kt)("inlineCode",{parentName:"p"},"~/.ssh")," directory in your home folder, and the default name depends on the type of the key:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"RSA keys"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"~/.ssh/id_rsa")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"ECDSA keys"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"~/.ssh/id_ecdsa")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Ed25519 keys"),": ",(0,o.kt)("inlineCode",{parentName:"li"},"~/.ssh/id_ed25519"))),(0,o.kt)("p",null,"There isn't a specific command to list all SSH keys generated on the device, but you can achieve this by listing the contents of the ",(0,o.kt)("inlineCode",{parentName:"p"},"~/.ssh")," directory. Therefore, we use the default command-line utility ",(0,o.kt)("inlineCode",{parentName:"p"},"ls")," to list the contents of a directory. When executed, it displays files and directories within the specified directory or, if no directory is specified, within the current working directory. In our case, we search for files with the ",(0,o.kt)("inlineCode",{parentName:"p"},".pub")," type to show all public keys in the default folder."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"ls ~/.ssh/*.pub\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("strong",{parentName:"p"},"NOTE"),": If you already generated one key, you could use it for the node. However, it is strongly recommended always to have one key pair for every application, so a potential attacker can not access multiple authentication systems simultaneously.")),(0,o.kt)("h3",{id:"542-creating-a-new-key"},"5.4.2 Creating a new key"),(0,o.kt)("p",null,"When generating a new SSH key pair, the ",(0,o.kt)("inlineCode",{parentName:"p"},"ssh-keygen")," command allows you to specify various options, such as the type of key, key length, and other configurations. The following options are used to define the type and strength of the generated key:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-t rsa"),": The ",(0,o.kt)("inlineCode",{parentName:"li"},"-t")," option is used to specify the type of key to generate. In our case, ",(0,o.kt)("inlineCode",{parentName:"li"},"rsa")," denotes that an RSA key pair will be generated."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"-b 4096"),": The ",(0,o.kt)("inlineCode",{parentName:"li"},"-b")," option is used to specify the number of bits in the key. A higher number of bits usually results in a more vital key. In this case, 4096 indicates that a 4096-bit RSA key will be generated. The default key length for RSA keys is typically 2048 bits, but using a 4096-bit key provides an additional layer of security.")),(0,o.kt)("h4",{id:"rsa-cryptography"},"RSA Cryptography"),(0,o.kt)("p",null,"RSA is a widely used public-key cryptosystem in modern computing and cryptography. The RSA algorithm is based on the mathematical properties of large prime numbers and is used for secure data transmission, digital signatures, and encryption."),(0,o.kt)("p",null,"The main benefit of choosing it for SSH is that it is widely supported and compatible with most SSH clients and servers. RSA keys with a length of 4096 bits provide high security. The only small deduction you must make here is that RSA keys tend to be larger, and key generation and cryptographic operations can be slower than ECDSA and Ed25519."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"ECDSA is faster and more efficient. However, not as widely supported as RSA, and its security depends on the choice of the underlying elliptic curve."),(0,o.kt)("li",{parentName:"ul"},"Ed25519 is the most currently supported and highly secure elliptic curve-based algorithm with excellent performance and is more prone to attacks than ECDSA. However, there may be some compatibility issues in some environments.")),(0,o.kt)("p",null,"On your personal computer, create the new key pair for SSH authentication."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"ssh-keygen -t rsa -b 4096\n")),(0,o.kt)("h3",{id:"543-defining-a-key-name"},"5.4.3 Defining a Key Name"),(0,o.kt)("p",null,"You will be prompted to ",(0,o.kt)("inlineCode",{parentName:"p"},"Enter file in which to save the key"),". Here, defining a specific name for the key is highly recommended to reference it later, mainly if you use multiple keys for different authentications. You can still use the default folder. Exchange:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<your-username>")," with the username of your personal computer"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<your-chosen-keyname>")," with your preferred name of the key without spaces")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"/Users/<your-username>/.ssh/<your-chosen-keyname>\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"As I explained above, If you do not want to specify a name, you can hit ",(0,o.kt)("inlineCode",{parentName:"p"},"Enter")," to generate a random numbered file.")),(0,o.kt)("h3",{id:"544-adding-a-passphrase"},"5.4.4 Adding a passphrase"),(0,o.kt)("p",null,"Now, enter a password used to encrypt the key. It is ",(0,o.kt)("strong",{parentName:"p"},"highly recommended")," to choose a solid password to raise the security level if someone gains access to your machine. A strong password is also essential for backups of the keys if your working machine is damaged during a trip and you need to regain access from a new device."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"If you do not want to set up a passphrase, you can hit ",(0,o.kt)("inlineCode",{parentName:"p"},"Enter")," to generate a key without password encryption.")),(0,o.kt)("h3",{id:"545-backing-up-the-private-key"},"5.4.5 Backing up the private key"),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Generate a backup before you set the authentication key to your node environment.")),(0,o.kt)("p",null,"Here, you could use a container of a cloud provider to store the file that can always be accessed even if devices get compromised or destroyed during a trip where you do not get physical access to your node in any short time. You could also store the backup on a dedicated USB device."),(0,o.kt)("p",null,"Because the key is a passphrase itself, no one could sign anything without knowing its password in case the cloud container is compromised. You could also use an encrypted container to improve security further. Just make sure you always have secure and different passwords."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"After backing up the generated key, we can continue using it in production.")),(0,o.kt)("h3",{id:"546-copying-the-public-key-to-the-node"},"5.4.6 Copying the public key to the node"),(0,o.kt)("p",null,"Copy a generated public key to the node machine. Make sure to replace:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<your-chosen-keyname>")," with your key's file path"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"<ssh-device-alias>")," with your SSH node alias")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"ssh-copy-id -i ~/.ssh/<your-chosen-keyname>.pub <ssh-device-alias>\n")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Change the path if you set up a custom directory for the key.")),(0,o.kt)("p",null,"You will be asked to input your node's user password one last time. Then this should be your final output. Please make sure that only the keys you wanted were added."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"Number of key(s) added:        1\n")),(0,o.kt)("p",null,"Now try logging into the machine with the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"ssh <ssh-device-alias>\n")),(0,o.kt)("p",null,"The command line tool automatically disconnects from your node after adding the key. Continue with testing the login using the authentication key."),(0,o.kt)("h3",{id:"547-checking-for-the-added-keys"},"5.4.7 Checking for the added keys"),(0,o.kt)("p",null,"Logging into the node, we can check if the key was added correctly. It will still ask you for the standard node's user password."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"ssh <ssh-device-alias>\n")),(0,o.kt)("p",null,"Check if the key was added."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"ls -al ~/.ssh/authorized_keys\n")),(0,o.kt)("p",null,"You should find your authentication key in the specific folder. If not, you need to redo the previous step."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Stay logged in to your node to enable secure key authentication in the following step.")))}d.isMDXComponent=!0}}]);
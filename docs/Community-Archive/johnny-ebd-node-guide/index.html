<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Community-Archive/johnny-ebd-node-guide">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Johnny&#x27;s Node Guide | Luksoverse - Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.luksoverse.io/img/lv-docs-logo.png"><meta data-rh="true" name="twitter:image" content="https://docs.luksoverse.io/img/lv-docs-logo.png"><meta data-rh="true" property="og:url" content="https://docs.luksoverse.io/docs/Community-Archive/johnny-ebd-node-guide"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Johnny&#x27;s Node Guide | Luksoverse - Docs"><meta data-rh="true" name="description" content="Guide by Johnny EBD"><meta data-rh="true" property="og:description" content="Guide by Johnny EBD"><link data-rh="true" rel="icon" href="/img/lv-logo.jpg"><link data-rh="true" rel="canonical" href="https://docs.luksoverse.io/docs/Community-Archive/johnny-ebd-node-guide"><link data-rh="true" rel="alternate" href="https://docs.luksoverse.io/docs/Community-Archive/johnny-ebd-node-guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.luksoverse.io/docs/Community-Archive/johnny-ebd-node-guide" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8dcf5c82.css">
<link rel="preload" href="/assets/js/runtime~main.e49edf39.js" as="script">
<link rel="preload" href="/assets/js/main.5d32bd4a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/black-logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/white-logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Luksoverse - docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/mainnet/complete-node-guide/hardware-build/start-here">Mainnet</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/testnet/testnet-info">Testnet</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/devnet/devnet-info">Devnet</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/l16-archive-docs/parameters">L16 Archive</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/mainnet/complete-node-guide/hardware-build/start-here">Mainnet</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/community-guides/validator-key-generation/">Community Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/community-guides/validator-key-generation/">Generate Validator Keys</a><button aria-label="Toggle the collapsible sidebar category &#x27;Generate Validator Keys&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/community-guides/validator-key-stake/">Deposit Validator Keys</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deposit Validator Keys&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community-guides/vpn-tunnel-setup">WireGuard Tunnel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community-guides/openssh-setup">OpenSSH Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community-guides/ssh-security">SSH Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community-guides/node-uninstall">Node Uninstall</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community-guides/mainnet-info">Luksoverse KeyGen guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/testnet/testnet-info">Testnet</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testnet/testnet-info">Testnet Info</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/devnet/devnet-info">Devnet</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devnet/devnet-info">Devnet Info</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/Community-Archive/">Community Archive</a><button aria-label="Toggle the collapsible sidebar category &#x27;Community Archive&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Community-Archive/johnny-ebd-node-guide">Johnny&#x27;s Node Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Community-Archive/system-monitoring-setup">System &amp; Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Community-Archive/node-troubleshoot">Node Troubleshoot</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Community-Archive/node-guide/start-here">node-guide</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/l16-archive-docs/parameters">L16 Archive</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/Community-Archive/"><span itemprop="name">Community Archive</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Johnny&#x27;s Node Guide</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Johnny&#x27;s Node Guide</h1><p>Guide by <a href="https://t.me/moonmclaren" target="_blank" rel="noopener noreferrer">Johnny EBD</a></p><blockquote><p><strong><em>Disclaimer</em></strong>
This article (the guide) is for informational purposes only and does not constitute professional advice. The author does not guarantee accuracy of the information in this article and the author is not responsible for any damages or losses incurred by following this article. A full disclaimer can be found at the bottom of this page — please read it before continuing.</p></blockquote><p>This is a guide to setup a Lukso validator node in a home environment. It suggests the use of a dedicated machine to run a node with validation, separate from a personal client for remote access.</p><blockquote><p><strong><em>NOTE</em></strong>
Most of the following steps require working in a terminal</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-requisites-️">Pre-Requisites 🗒️<a href="#pre-requisites-️" class="hash-link" aria-label="Direct link to Pre-Requisites 🗒️" title="Direct link to Pre-Requisites 🗒️">​</a></h2><ul><li><a href="https://ubuntu.com/" target="_blank" rel="noopener noreferrer">Ubuntu</a></li><li>Dedicated mini-PC</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="my-setup-">My Setup 💻<a href="#my-setup-" class="hash-link" aria-label="Direct link to My Setup 💻" title="Direct link to My Setup 💻">​</a></h3><ul><li>Ubuntu 22.04.1 LTS</li><li>Intel NUC 12 Pro core i7 1260p</li><li>Kingston Fury Impact 32GB (16GBx2) DDR4 3200MHz</li><li>Seagate Firecuda 530 Gen4 NVME 2TB with heatsink</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="auto-start"><strong>Auto Start</strong><a href="#auto-start" class="hash-link" aria-label="Direct link to auto-start" title="Direct link to auto-start">​</a></h4><p>I had to manually change the BIOS settings to ensure that, if power gets reset, NUC always auto starts. A simple test is to unplug and plug power cord right back in.</p><p>For NUC I followed the following steps:</p><ol><li>Press F2 during boot to enter BIOS setup</li><li>Go to <code>Power</code> -&gt; <code>Secondary Power Settings</code> menu</li><li>Set the option for <code>After Power Failure</code> to <code>Power On</code></li><li>Press F10 to save changes and exit BIOS</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-setup-️">System Setup ⚙️<a href="#system-setup-️" class="hash-link" aria-label="Direct link to System Setup ⚙️" title="Direct link to System Setup ⚙️">​</a></h2><blockquote><p><strong><em>NOTE</em></strong>
The following steps are performed directly on a node machine.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-manually-and-install-dependencies">Update Manually and Install Dependencies<a href="#update-manually-and-install-dependencies" class="hash-link" aria-label="Direct link to Update Manually and Install Dependencies" title="Direct link to Update Manually and Install Dependencies">​</a></h3><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get upgrade -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt dist-upgrade -y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get autoremove</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get autoclean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install -y nano wget make curl git net-tools</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="keep-your-system-up-to-date-automatically">Keep your System Up to Date Automatically<a href="#keep-your-system-up-to-date-automatically" class="hash-link" aria-label="Direct link to Keep your System Up to Date Automatically" title="Direct link to Keep your System Up to Date Automatically">​</a></h3><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install unattended-upgrades</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo dpkg-reconfigure -plow unattended-upgrades</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="disable-root-access">Disable Root Access<a href="#disable-root-access" class="hash-link" aria-label="Direct link to Disable Root Access" title="Direct link to Disable Root Access">​</a></h3><p>Root access should not be used. Instead a user should be using <code>sudo</code> to perform privileged operations on a system.</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo passwd -l root</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-firewall">Configure Firewall<a href="#configure-firewall" class="hash-link" aria-label="Direct link to Configure Firewall" title="Direct link to Configure Firewall">​</a></h3><p>By default deny all traffic:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw default deny incoming</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw default allow outgoing</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Allow P2P ports for Lukso clients:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw allow 30303/tcp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw allow 13000/tcp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw allow 12000/udp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw allow 30303/udp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p><strong><em>NOTE:</em></strong> make sure to open same ports on your home router</p></blockquote><p>Enable Firewall:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw enable</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Verify firewall configuration:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It should look something like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Status: active</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">To                         Action      From</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--                         ------      ----</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">13000/tcp                  ALLOW       Anywhere</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12000/udp                  ALLOW       Anywhere</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">30303/tcp                  ALLOW       Anywhere</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">30303/udp                  ALLOW       Anywhere</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">13000/tcp (v6)             ALLOW       Anywhere (v6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12000/udp (v6)             ALLOW       Anywhere (v6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">30303/tcp (v6)             ALLOW       Anywhere (v6)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">30303/udp (v6)             ALLOW       Anywhere (v6)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="secure-remote-access-">Secure Remote Access 🔐<a href="#secure-remote-access-" class="hash-link" aria-label="Direct link to Secure Remote Access 🔐" title="Direct link to Secure Remote Access 🔐">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wireguard-tunnel-via-pivpn">WireGuard tunnel via PiVPN<a href="#wireguard-tunnel-via-pivpn" class="hash-link" aria-label="Direct link to WireGuard tunnel via PiVPN" title="Direct link to WireGuard tunnel via PiVPN">​</a></h3><p>Please read <a href="https://hackmd.io/@JohnnyEBD/HyTqm4ejc" target="_blank" rel="noopener noreferrer">this</a> dedicated guide with detailed steps on how to easily setup a VPN host using the PiVPN installation script.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="openssh-server-setup">OpenSSH Server Setup<a href="#openssh-server-setup" class="hash-link" aria-label="Direct link to OpenSSH Server Setup" title="Direct link to OpenSSH Server Setup">​</a></h3><p>Also refer to <a href="https://hackmd.io/@JohnnyEBD/HkXf-1SC9" target="_blank" rel="noopener noreferrer">this</a> essential guide on how to setup and securely access your Ubuntu server with SSH service.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hardening-ssh-security-">Hardening SSH Security 💪<a href="#hardening-ssh-security-" class="hash-link" aria-label="Direct link to Hardening SSH Security 💪" title="Direct link to Hardening SSH Security 💪">​</a></h3><p>Optionally follow <a href="https://hackmd.io/@JohnnyEBD/HJAio-lzo" target="_blank" rel="noopener noreferrer">this</a> guide to vastly improve the security of SSH service on your Ubuntu server by enabling 2FA and Fail2Ban.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improve-ssh-connection"><strong>Improve SSH Connection</strong><a href="#improve-ssh-connection" class="hash-link" aria-label="Direct link to improve-ssh-connection" title="Direct link to improve-ssh-connection">​</a></h4><p>While setting up a system, SSH terminal may seem to be slow due to wifi power management settings on a node machine. To disable it, modify the config:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /etc/NetworkManager/conf.d/default-wifi-powersave-on.conf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Config:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[connection]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wifi.powersave = 2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Close editor by pressing <code>ctrl</code> + <code>X</code>, then save. Restart <code>NetworkManager</code> service:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl restart NetworkManager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="node-setup">Node Setup<a href="#node-setup" class="hash-link" aria-label="Direct link to Node Setup" title="Direct link to Node Setup">​</a></h2><blockquote><p><strong><em>NOTE</em></strong>
Following steps are performed on a personal machine.</p></blockquote><p>Access your remote node machine</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh johnnyebd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>TBD AS LUKSO IS PREPARING FOR MAINNET LAUNCH</strong> 🔥🚀🌑</p><p>In the meantime follow developments and instructions for <a href="https://docs.lukso.tech/networks/l16-testnet" target="_blank" rel="noopener noreferrer">L16 beta</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-">Monitoring 🔭<a href="#monitoring-" class="hash-link" aria-label="Direct link to Monitoring 🔭" title="Direct link to Monitoring 🔭">​</a></h2><p>Sets up a dashboard to monitor state of a node machine, node, and validators.</p><blockquote><p><strong><em>NOTE:</em></strong> Following steps are performed on personal machine.</p></blockquote><p>Access your remote node machine</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh johnnyebd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prometheus">Prometheus<a href="#prometheus" class="hash-link" aria-label="Direct link to Prometheus" title="Direct link to Prometheus">​</a></h3><p>Add user to collect node stats:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo adduser --system prometheus --group --no-create-home</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Identify latest version for <code>linux-amd64</code> <a href="https://prometheus.io/download/" target="_blank" rel="noopener noreferrer">here</a>, e.g. <code>2.38.0</code>, and install prometheus with the following:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://github.com/prometheus/prometheus/releases/download/v2.38.0/prometheus-2.38.0.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar xzvf prometheus-2.38.0.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd prometheus-2.38.0.linux-amd64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp promtool /usr/local/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp prometheus /usr/local/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown root:root /usr/local/bin/promtool /usr/local/bin/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod 755 /usr/local/bin/promtool /usr/local/bin/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm prometheus-2.38.0.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf prometheus-2.38.0.linux-amd64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure"><strong>Configure</strong><a href="#configure" class="hash-link" aria-label="Direct link to configure" title="Direct link to configure">​</a></h4><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkdir -p /etc/prometheus/console_libraries /etc/prometheus/consoles /etc/prometheus/files_sd /etc/prometheus/rules /etc/prometheus/rules.d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Edit configuration file:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /etc/prometheus/prometheus.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Content of the configuration file should have:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">global:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  scrape_interval: 15s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  evaluation_interval: 15s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">scrape_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - job_name: &#x27;prometheus&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scrape_interval: 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - targets: [&#x27;127.0.0.1:9090&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - job_name: &#x27;beacon node&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scrape_interval: 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - targets: [&#x27;127.0.0.1:8080&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - job_name: &#x27;node_exporter&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scrape_interval: 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - targets: [&#x27;127.0.0.1:9100&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - job_name: &#x27;validator&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    scrape_interval: 5s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - targets: [&#x27;127.0.0.1:8081&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - job_name: &#x27;ping_google&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metrics_path: /probe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      module: [icmp]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - targets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - 8.8.8.8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    relabel_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - source_labels: [__address__]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        target_label: __param_target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - source_labels: [__param_target]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        target_label: instance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - target_label: __address__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replacement: 127.0.0.1:9115  # The blackbox exporter&#x27;s real hostname:port.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - job_name: &#x27;ping_cloudflare&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metrics_path: /probe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    params:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      module: [icmp]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - targets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        - 1.1.1.1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    relabel_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - source_labels: [__address__]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        target_label: __param_target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - source_labels: [__param_target]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        target_label: instance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - target_label: __address__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        replacement: 127.0.0.1:9115  # The blackbox exporter&#x27;s real hostname:port.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - job_name: json_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - targets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - 127.0.0.1:7979</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - job_name: json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metrics_path: /probe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    static_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - targets:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - https://api.coingecko.com/api/v3/simple/price?ids=lukso-token&amp;vs_currencies=usd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    relabel_configs:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - source_labels: [__address__]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      target_label: __param_target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - source_labels: [__param_target]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      target_label: instance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - target_label: __address__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      replacement: 127.0.0.1:7979</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Prepare data directory for prometheus:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown -R prometheus:prometheus /etc/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkdir /var/lib/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown prometheus:prometheus /var/lib/prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod 755 /var/lib/prometheus</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Open port to access to metrics. This is optional, only for external use:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw allow 9090/tcp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-service"><strong>Configure Service</strong><a href="#configure-service" class="hash-link" aria-label="Direct link to configure-service" title="Direct link to configure-service">​</a></h4><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /etc/systemd/system/prometheus.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The content of service configuration file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=Prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wants=network-online.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">After=network-online.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User=prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Group=prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestartSec=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/usr/local/bin/prometheus \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --config.file /etc/prometheus/prometheus.yml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --storage.tsdb.path /var/lib/prometheus/ \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --storage.tsdb.retention.time=31d \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --web.console.templates=/etc/prometheus/consoles \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --web.console.libraries=/etc/prometheus/console_libraries</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=multi-user.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Enable service:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start prometheus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl enable prometheus</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="prometheus-update-script"><strong>Prometheus update script</strong><a href="#prometheus-update-script" class="hash-link" aria-label="Direct link to prometheus-update-script" title="Direct link to prometheus-update-script">​</a></h4><p>In order to easily update Prometheus you can run this <a href="https://github.com/remyroy/ethstaker/blob/main/scripts/update-prometheus.py" target="_blank" rel="noopener noreferrer">script</a>, courtesy of remyroy, for which you need to have one of python&#x27;s latest version and you can check that with:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 --version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If it&#x27;s an older version than 3.10 or not installed at all you can run this command:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install python3.10 -y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After that you can download the script and run it.</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wget https://raw.githubusercontent.com/remyroy/ethstaker/main/scripts/update-prometheus.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python3 update-prometheus.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The script will check the current installed version and it will compare it with the latest stable release version on Github. If there is a new version available, it will prompt you to update it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="grafana">Grafana<a href="#grafana" class="hash-link" aria-label="Direct link to Grafana" title="Direct link to Grafana">​</a></h3><p>Install:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install -y apt-transport-https</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install -y software-properties-common wget</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget -qO- https://packages.grafana.com/gpg.key | sudo tee /etc/apt/trusted.gpg.d/grafana.asc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo add-apt-repository &quot;deb https://packages.grafana.com/oss/deb stable main&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt-get install grafana</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-service-1"><strong>Configure Service</strong><a href="#configure-service-1" class="hash-link" aria-label="Direct link to configure-service-1" title="Direct link to configure-service-1">​</a></h4><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /lib/systemd/system/grafana-server.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The content of service configuration file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=Grafana instance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Documentation=http://docs.grafana.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Wants=network-online.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">After=network-online.target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">After=postgresql.service mariadb.service mysql.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EnvironmentFile=/etc/default/grafana-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User=grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Group=grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=on-failure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WorkingDirectory=/usr/share/grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RuntimeDirectory=grafana</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RuntimeDirectoryMode=0750</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/usr/sbin/grafana-server \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            --config=${CONF_FILE} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            --pidfile=${PID_FILE_DIR}/grafana-server.pid \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            --packaging=deb \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            cfg:default.paths.logs=${LOG_DIR} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            cfg:default.paths.data=${DATA_DIR} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            cfg:default.paths.plugins=${PLUGINS_DIR} \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            cfg:default.paths.provisioning=${PROVISIONING_CFG_DIR}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LimitNOFILE=10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TimeoutStopSec=20</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CapabilityBoundingSet=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DeviceAllow=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LockPersonality=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MemoryDenyWriteExecute=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NoNewPrivileges=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PrivateDevices=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PrivateTmp=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PrivateUsers=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectClock=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectControlGroups=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectHome=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectHostname=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectKernelLogs=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectKernelModules=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectKernelTunables=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectProc=invisible</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ProtectSystem=full</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RemoveIPC=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestrictAddressFamilies=AF_INET AF_INET6 AF_UNIX</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestrictNamespaces=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestrictRealtime=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestrictSUIDSGID=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SystemCallArchitectures=native</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UMask=0027</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Alias=grafana.service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=multi-user.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Enable service:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start grafana-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl enable grafana-server</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Open port to access metrics. This is optional and only for external use:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ufw allow 3000/tcp</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-dashboard"><strong>Configure Dashboard</strong><a href="#configure-dashboard" class="hash-link" aria-label="Direct link to configure-dashboard" title="Direct link to configure-dashboard">​</a></h4><p>Login to grafana by navigating to webrowser <code>http://192.168.86.29:3000</code>. Replace <code>192.168.86.29</code> with the IP of your node machine. This is same IP used to ssh.</p><p>Default credentials are username and password <code>admin</code>. Set a new secure (long) password when prompted by grafana.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="data-source"><strong>Data Source</strong><a href="#data-source" class="hash-link" aria-label="Direct link to data-source" title="Direct link to data-source">​</a></h5><ol><li>On the left-hand menu, hover over the gear menu and click on <code>Data Sources</code></li><li>Then click on the Add Data Source button</li><li>Hover over the Prometheus card on screen, then click on the Select button</li><li>Enter <a href="http://127.0.0.1:9090/" target="_blank" rel="noopener noreferrer">http://127.0.0.1:9090/</a> into the URL field, then click Save &amp; Test</li></ol><h5 class="anchor anchorWithStickyNavbar_LWe7" id="install-dashboard"><strong>Install Dashboard</strong><a href="#install-dashboard" class="hash-link" aria-label="Direct link to install-dashboard" title="Direct link to install-dashboard">​</a></h5><ol><li>Hover over the plus symbol icon in the left-hand menu, then click on Import</li><li>Copy and paste <a href="https://github.com/lykhonis/lukso-node-guide/blob/main/grafana/dashboard.json" target="_blank" rel="noopener noreferrer">the dashboard</a> into the <code>Import via panel json</code> text box on the screen</li><li>Then click the Load button</li><li>Then click the Import button</li></ol><h5 class="anchor anchorWithStickyNavbar_LWe7" id="enable-alerts"><strong>Enable Alerts</strong><a href="#enable-alerts" class="hash-link" aria-label="Direct link to enable-alerts" title="Direct link to enable-alerts">​</a></h5><ol><li>On the left-hand menu, hover over the alarm menue and click on <code>Notification channels</code></li><li>Click on <code>New channel</code></li><li>Select <code>Type</code> and <a href="https://grafana.com/docs/grafana/latest/alerting/old-alerting/notifications/" target="_blank" rel="noopener noreferrer">configure</a></li></ol><p>On lukso dashboard:</p><ol><li>Scroll down on a dashboard to <code>Alerts</code> section</li><li>Select each alert and click <code>Edit</code></li><li>In <code>Alert</code> tab, select notifications <code>send to</code></li><li>Save and repeat for each alert</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="node-exporter">Node Exporter<a href="#node-exporter" class="hash-link" aria-label="Direct link to Node Exporter" title="Direct link to Node Exporter">​</a></h3><p>Add user to monitors node stats:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo adduser --system node_exporter --group --no-create-home</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Install:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar xzvf node_exporter-1.3.1.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp node_exporter-1.3.1.linux-amd64/node_exporter /usr/local/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown node_exporter:node_exporter /usr/local/bin/node_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm node_exporter-1.3.1.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf node_exporter-1.3.1.linux-amd64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-service-2"><strong>Configure Service</strong><a href="#configure-service-2" class="hash-link" aria-label="Direct link to configure-service-2" title="Direct link to configure-service-2">​</a></h4><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /etc/systemd/system/node_exporter.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The content of service configuration file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=Node Exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestartSec=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User=node_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/usr/local/bin/node_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=multi-user.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Enable service:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start node_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl enable node_exporter</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="node-exporter-update-script"><strong>Node Exporter update script</strong><a href="#node-exporter-update-script" class="hash-link" aria-label="Direct link to node-exporter-update-script" title="Direct link to node-exporter-update-script">​</a></h4><p>In order to easily update Node Exporter you can run this <a href="https://github.com/remyroy/ethstaker/blob/main/scripts/update-node-exporter.py" target="_blank" rel="noopener noreferrer">script</a>, courtesy of remyroy. Download and run it with:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wget https://raw.githubusercontent.com/remyroy/ethstaker/main/scripts/update-node-exporter.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python3 update-node-exporter.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The script will check the current installed version and it will compare it with the latest stable release version on Github. If there is a new version available, it will prompt you to update it.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="json-exporter">Json Exporter<a href="#json-exporter" class="hash-link" aria-label="Direct link to Json Exporter" title="Direct link to Json Exporter">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites"><strong>Prerequisites</strong><a href="#prerequisites" class="hash-link" aria-label="Direct link to prerequisites" title="Direct link to prerequisites">​</a></h4><p>Check <code>go</code> version if installed:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">go version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If it is less than <code>1.18.5</code> please install following:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">wget https://dl.google.com/go/go1.18.5.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo tar -xvf go1.18.5.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm go1.18.5.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mv go /usr/local/go-1.18.5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo ln -sf /usr/local/go-1.18.5/bin/go /usr/bin/go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">go version</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="build-and-install"><strong>Build and Install</strong><a href="#build-and-install" class="hash-link" aria-label="Direct link to build-and-install" title="Direct link to build-and-install">​</a></h4><p>User:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo adduser --system json_exporter --group --no-create-home</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Install:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/prometheus-community/json_exporter.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd json_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo make build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp json_exporter /usr/local/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown json_exporter:json_exporter /usr/local/bin/json_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf json_exporter</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-1"><strong>Configure</strong><a href="#configure-1" class="hash-link" aria-label="Direct link to configure-1" title="Direct link to configure-1">​</a></h4><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkdir /etc/json_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown json_exporter:json_exporter /etc/json_exporter</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Setup <code>LYX</code> token price:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /etc/json_exporter/json_exporter.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The content of configuration file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">modules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metrics:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - name: lyxusd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      path: &quot;{.lukso-token.usd}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      help: Lukso (LYX) price in USD</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Change ownership of configuration file:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown json_exporter:json_exporter /etc/json_exporter/json_exporter.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-service-3"><strong>Configure Service</strong><a href="#configure-service-3" class="hash-link" aria-label="Direct link to configure-service-3" title="Direct link to configure-service-3">​</a></h4><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /etc/systemd/system/json_exporter.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The content of service configuration file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=JSON Exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestartSec=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User=json_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/usr/local/bin/json_exporter --config.file /etc/json_exporter/json_exporter.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=multi-user.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Enable service:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start json_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl enable json_exporter</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ping">Ping<a href="#ping" class="hash-link" aria-label="Direct link to Ping" title="Direct link to Ping">​</a></h3><p>Pings google and cloudflare to track latency.</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo adduser --system blackbox_exporter --group --no-create-home</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Install:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://github.com/prometheus/blackbox_exporter/releases/download/v0.22.0/blackbox_exporter-0.22.0.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar xvzf blackbox_exporter-0.22.0.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp blackbox_exporter-0.22.0.linux-amd64/blackbox_exporter /usr/local/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown blackbox_exporter:blackbox_exporter /usr/local/bin/blackbox_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chmod 755 /usr/local/bin/blackbox_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm blackbox_exporter-0.22.0.linux-amd64.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf blackbox_exporter-0.22.0.linux-amd64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Enable ping permissions:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo setcap cap_net_raw+ep /usr/local/bin/blackbox_exporter</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-2"><strong>Configure</strong><a href="#configure-2" class="hash-link" aria-label="Direct link to configure-2" title="Direct link to configure-2">​</a></h4><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkdir /etc/blackbox_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown blackbox_exporter:blackbox_exporter /etc/blackbox_exporter</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /etc/blackbox_exporter/blackbox.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The content of configuration file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">modules:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        icmp:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                prober: icmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                timeout: 10s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                icmp:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        preferred_ip_protocol: ipv4</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Change ownership of configuration file:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo chown blackbox_exporter:blackbox_exporter /etc/blackbox_exporter/blackbox.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-service-4"><strong>Configure Service</strong><a href="#configure-service-4" class="hash-link" aria-label="Direct link to configure-service-4" title="Direct link to configure-service-4">​</a></h4><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo nano /etc/systemd/system/blackbox_exporter.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The content of service configuration file:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Description=Blackbox Exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Type=simple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Restart=always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RestartSec=5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">User=blackbox_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ExecStart=/usr/local/bin/blackbox_exporter --config.file /etc/blackbox_exporter/blackbox.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WantedBy=multi-user.target</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Enable service:</p><div class="language-shell= codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell= codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl daemon-reload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl start blackbox_exporter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo systemctl enable blackbox_exporter</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Luksoverse wishes prosperous validation to everyone in hopes that this guide was complete and easy enough to follow. Any suggestions you might have please don&#x27;t hesitate to reach out to any of us.</p><blockquote><p><strong><em>Full Disclaimer</em></strong>
This article (the guide) is for informational purposes only and does not constitute professional advice. The author does not warrant or guarantee the accuracy, integrity, quality, completeness, currency, or validity of any information in this article. All information herein is provided “as is” without warranty of any kind and is subject to change at any time without notice. The author disclaims all express, implied, and statutory warranties of any kind, including warranties as to accuracy, timeliness, completeness, or fitness of the information in this article for any particular purpose. The author is not responsible for any direct, indirect, incidental, consequential or any other damages arising out of or in connection with the use of this article or in reliance on the information available on this article. This includes any personal injury, business interruption, loss of use, lost data, lost profits, or any other pecuniary loss, whether in an action of contract, negligence, or other misuse, even if the author has been informed of the possibility.</p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="credits">Credits<a href="#credits" class="hash-link" aria-label="Direct link to Credits" title="Direct link to Credits">​</a></h2><ul><li><a href="https://github.com/metanull-operator/eth2-ubuntu" target="_blank" rel="noopener noreferrer">https://github.com/metanull-operator/eth2-ubuntu</a></li><li><a href="https://github.com/lykhonis/lukso-node-guide" target="_blank" rel="noopener noreferrer">https://github.com/lykhonis/lukso-node-guide</a></li><li><a href="https://github.com/remyroy/ethstaker" target="_blank" rel="noopener noreferrer">https://github.com/remyroy/ethstaker</a></li><li><a href="https://github.com/SomerEsat/ethereum-staking-guides" target="_blank" rel="noopener noreferrer">https://github.com/SomerEsat/ethereum-staking-guides</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Luksoverse/community-docs/tree/main/packages/create-docusaurus/templates/shared/docs/Community-Archive/johnny-ebd-node-guide.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Community-Archive/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Community Archive</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Community-Archive/system-monitoring-setup"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">System &amp; Monitoring</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pre-requisites-️" class="table-of-contents__link toc-highlight">Pre-Requisites 🗒️</a><ul><li><a href="#my-setup-" class="table-of-contents__link toc-highlight">My Setup 💻</a></li></ul></li><li><a href="#system-setup-️" class="table-of-contents__link toc-highlight">System Setup ⚙️</a><ul><li><a href="#update-manually-and-install-dependencies" class="table-of-contents__link toc-highlight">Update Manually and Install Dependencies</a></li><li><a href="#keep-your-system-up-to-date-automatically" class="table-of-contents__link toc-highlight">Keep your System Up to Date Automatically</a></li><li><a href="#disable-root-access" class="table-of-contents__link toc-highlight">Disable Root Access</a></li><li><a href="#configure-firewall" class="table-of-contents__link toc-highlight">Configure Firewall</a></li></ul></li><li><a href="#secure-remote-access-" class="table-of-contents__link toc-highlight">Secure Remote Access 🔐</a><ul><li><a href="#wireguard-tunnel-via-pivpn" class="table-of-contents__link toc-highlight">WireGuard tunnel via PiVPN</a></li><li><a href="#openssh-server-setup" class="table-of-contents__link toc-highlight">OpenSSH Server Setup</a></li><li><a href="#hardening-ssh-security-" class="table-of-contents__link toc-highlight">Hardening SSH Security 💪</a></li></ul></li><li><a href="#node-setup" class="table-of-contents__link toc-highlight">Node Setup</a></li><li><a href="#monitoring-" class="table-of-contents__link toc-highlight">Monitoring 🔭</a><ul><li><a href="#prometheus" class="table-of-contents__link toc-highlight">Prometheus</a></li><li><a href="#grafana" class="table-of-contents__link toc-highlight">Grafana</a></li><li><a href="#node-exporter" class="table-of-contents__link toc-highlight">Node Exporter</a></li><li><a href="#json-exporter" class="table-of-contents__link toc-highlight">Json Exporter</a></li><li><a href="#ping" class="table-of-contents__link toc-highlight">Ping</a></li></ul></li><li><a href="#credits" class="table-of-contents__link toc-highlight">Credits</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mainnet/complete-node-guide/hardware-build/start-here">Start Your Mainnet Node</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/mainnet/mainnet-info">Mainnet info</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Community-Archive/community-archive">Community archive</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/community-guides/vpn-setup">Advanced Community Setup</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://t.me/luksoverse" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/AE3KdFhpAQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/luksoverse_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Contribute</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Luksoverse/docs.luksoverse.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://luksoverse.io/contributor/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Luksoverse.io website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 The Luksoverse</div></div></div></footer></div>
<script src="/assets/js/runtime~main.e49edf39.js"></script>
<script src="/assets/js/main.5d32bd4a.js"></script>
</body>
</html>
<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-community-guides/vpn-tunnel-setup">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">WireGuard Tunnel | Luksoverse - Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.luksoverse.io/img/lv-docs-logo.png"><meta data-rh="true" name="twitter:image" content="https://docs.luksoverse.io/img/lv-docs-logo.png"><meta data-rh="true" property="og:url" content="https://docs.luksoverse.io/docs/community-guides/vpn-tunnel-setup"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="WireGuard Tunnel | Luksoverse - Docs"><meta data-rh="true" name="description" content="Guide by: Johnny Ξ₿D.LYX"><meta data-rh="true" property="og:description" content="Guide by: Johnny Ξ₿D.LYX"><link data-rh="true" rel="icon" href="/img/lv-logo.jpg"><link data-rh="true" rel="canonical" href="https://docs.luksoverse.io/docs/community-guides/vpn-tunnel-setup"><link data-rh="true" rel="alternate" href="https://docs.luksoverse.io/docs/community-guides/vpn-tunnel-setup" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.luksoverse.io/docs/community-guides/vpn-tunnel-setup" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.8dcf5c82.css">
<link rel="preload" href="/assets/js/runtime~main.6e41e909.js" as="script">
<link rel="preload" href="/assets/js/main.5d32bd4a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/black-logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/white-logo.png" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Luksoverse - docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/mainnet/complete-node-guide/hardware-build/start-here">Mainnet</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/testnet/testnet-info">Testnet</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/devnet/devnet-info">Devnet</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/l16-archive-docs/parameters">L16 Archive</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/mainnet/complete-node-guide/hardware-build/start-here">Mainnet</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/community-guides/validator-key-generation/">Community Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/community-guides/validator-key-generation/">Generate Validator Keys</a><button aria-label="Toggle the collapsible sidebar category &#x27;Generate Validator Keys&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/community-guides/validator-key-stake/">Deposit Validator Keys</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deposit Validator Keys&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/community-guides/vpn-tunnel-setup">WireGuard Tunnel</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community-guides/openssh-setup">OpenSSH Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community-guides/ssh-security">SSH Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community-guides/node-uninstall">Node Uninstall</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/community-guides/mainnet-info">Luksoverse KeyGen guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/testnet/testnet-info">Testnet</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testnet/testnet-info">Testnet Info</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/docs/devnet/devnet-info">Devnet</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devnet/devnet-info">Devnet Info</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/docs/Community-Archive/">Community Archive</a><button aria-label="Toggle the collapsible sidebar category &#x27;Community Archive&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Community-Archive/johnny-ebd-node-guide">Johnny&#x27;s Node Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Community-Archive/system-monitoring-setup">System &amp; Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Community-Archive/node-troubleshoot">Node Troubleshoot</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/Community-Archive/node-guide/start-here">node-guide</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/l16-archive-docs/parameters">L16 Archive</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Community Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">WireGuard Tunnel</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>WireGuard tunnel via PiVPN</h1><p>Guide by: <a href="https://github.com/JohnnyEBD-LYX" target="_blank" rel="noopener noreferrer">Johnny Ξ₿D.LYX</a></p><p><img loading="lazy" src="https://i.imgur.com/w4MEqOr.png" class="img_ev3q"></p><blockquote><p><strong><em>Disclaimer</em></strong>
This article is for informational purposes only and does not constitute professional advice. The author does not guarantee accuracy of the information in this article and the author is not responsible for any damages or losses incurred by following this article.</p></blockquote><p>This tutorial will show you how to install your own personal VPN into your network using PiVPN as a wrapper for WireGuard. Why would you want to do this?</p><p>There are a couple of advantages to using the WireGuard VPN on your server over OpenVPN.</p><p>WireGuard is much faster at making connections than OpenVPN, it can complete a connection within a tenth of a second.</p><p>The codebase for WireGuard is also drastically smaller then OpenVPN’s. This allows the software to be more secure thanks to the smaller attack surface and bugs being able to be dealt with easier.</p><p>None of this would be possible of course without the PiVPN project which you can find at <a href="https://pivpn.io." target="_blank" rel="noopener noreferrer">https://pivpn.io.</a> This project is maintained to be a simple and easy solution for getting OpenVPN or WireGuard VPN services running on a Linux based host.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-1---update-your-os"><strong>Part 1 - Update your OS</strong><a href="#part-1---update-your-os" class="hash-link" aria-label="Direct link to part-1---update-your-os" title="Direct link to part-1---update-your-os">​</a></h3><p>First things first, let’s get everything updated. Run this command:</p><p><strong><code>sudo apt update &amp;&amp; sudo apt upgrade -y</code></strong></p><p>After that you need to create a new user. It’s ok to use any name for your user. In this example, we will use <strong>vpn</strong>:</p><p><strong><code>sudo adduser --system vpn --group --no-create-home</code></strong></p><p>Try to keep the settings to the default during the installation. Then, it will automatically find your new user and add it as the default storage for the VPN profiles.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-2--install-pivpn"><strong>Part 2 – Install PiVPN</strong><a href="#part-2--install-pivpn" class="hash-link" aria-label="Direct link to part-2--install-pivpn" title="Direct link to part-2--install-pivpn">​</a></h3><p>Run the following command:</p><p><strong><code>sudo curl -L https://install.pivpn.io | bash</code></strong></p><p><img loading="lazy" src="https://i.imgur.com/htMUznt.png" class="img_ev3q"></p><p>This will start the PiVPN installation wizard. <strong>You can get an <code>OS not tested yet</code> prompt, just acknowledge it if you can, as it might cause the installer to exit or not function properly in later versions. More updated versions will let you set a dynamic DNS if you&#x27;re on a dynamic IP, as most connections are, so you won&#x27;t get locked out during an ISP IP change. You can get these domains for free from services like <a href="https://noip.com" target="_blank" rel="noopener noreferrer">noip.com</a>.</strong></p><p>First step is to set a static IP on your PiVPN server. Click <strong>OK</strong>.</p><p><img loading="lazy" src="https://i.imgur.com/9O19kDb.png" class="img_ev3q"></p><p>Setting a static IP address basically means that we want PiVPN to run on an IP address that will never change. This is because we will be setting up a firewall rule that allows traffic to flow through to the PiVPN.</p><p>You can achieve an IP address that never changes by manually setting an IP address that is outside of your DHCP lease pool range, or by telling DHCP that the IP address assigned to your PiVPN server should never change (this is called a DHCP reservation).</p><p>For this tutorial, we will set a static IP address, so we will choose <strong>No</strong> on this next screen.</p><p><img loading="lazy" src="https://i.imgur.com/1Q0Bleg.png" class="img_ev3q"></p><p>To set a static IP address for the WireGuard software the installation script will want to use your default settings.</p><p>If the default IP address and gateway are correct to you, then you can safely select the <strong>Yes</strong> option by pressing the <strong>ENTER</strong> key.</p><p><img loading="lazy" src="https://i.imgur.com/lNIzvaj.png" class="img_ev3q"></p><p>The script might detect that we aren&#x27;t running it&#x27;s intended OS and will display this next message. You can just safely keep going and at the end of the tutorial this issue will be addressed by setting it up manually through the nmcli command.</p><p><img loading="lazy" src="https://i.imgur.com/ZRzXftS.png" class="img_ev3q"></p><p>You will be warned that you can potentially run into IP conflicts when using this method.</p><p><img loading="lazy" src="https://i.imgur.com/aKrzXqQ.png" class="img_ev3q"></p><p>The way around that is to use DHCP reservation. However, most routers should be smart enough to stop this from being a problem.
Press the <strong>ENTER</strong> key to continue.</p><p><img loading="lazy" src="https://i.imgur.com/szR8ZLC.png" class="img_ev3q"></p><p>This screen will tell you that you need to specify a local user to store the WireGuard configuration files.
Continue to the next screen by pressing the <strong>ENTER</strong> key.</p><p><img loading="lazy" src="https://i.imgur.com/uTqkgV3.png" class="img_ev3q"></p><p>You can now select from a list of available users.
Use the <strong>ARROW</strong> keys to highlight the user then the <strong>SPACEBAR</strong> to select it.
Once you are happy with the user you have selected, press the <strong>ENTER</strong> key.</p><p><img loading="lazy" src="https://i.imgur.com/RejGpCM.png" class="img_ev3q"></p><p>Finally, we can select the VPN software and as we want to install WireGuard to our Host, you can press the <strong>ENTER</strong> key to continue. By default the PiVPN script selects WireGuard, which is also the most adjusted to our use case.</p><p><img loading="lazy" src="https://i.imgur.com/f1H7kgr.png" class="img_ev3q"></p><p>This screen will allow you to change the port that WireGuard uses on your Host.
It is recommended to keep it the same unless you have a particular reason to change the port.
Press the <strong>ENTER</strong> key to confirm the specified port.</p><p><img loading="lazy" src="https://i.imgur.com/uF8O7MS.png" class="img_ev3q"></p><p>This screen just confirms the port that you set your WireGuard VPN Host to use.
Please note that to be able to access your WireGuard VPN from outside of your home network, you will need to IPv4 forward the port mentioned here in your router and the port type is <strong>UDP</strong>. Don&#x27;t worry about the UFW rules as these will be written by the script for you.
Confirm that the port is still correct, then press the <strong>ENTER</strong> key to proceed.</p><p><img loading="lazy" src="https://i.imgur.com/JALBi4N.png" class="img_ev3q"></p><p>We can now specify the DNS provider that we want to use for our VPN clients.
For our tutorial, we chose to use the <strong>Cloudflare</strong> one as it is relatively speedy, and they purge their logs every 24 hours.
Use the <strong>ARROW</strong> keys to navigate through this menu. Once you have found the DNS provider you want to use, press the <strong>SPACEBAR</strong> key.
If you are happy with your selection, press the <strong>ENTER</strong> key to confirm it.</p><p><img loading="lazy" src="https://i.imgur.com/erWeZnL.png" class="img_ev3q"></p><p>You can specify two different ways you want to access your WireGuard VPN.
Using your public IP address is the easiest option. However, this should only be used if you have a static IP address. The other option is to use a domain name.
For this guide, we will be sticking with using our public IP address.
Once you have the option you want selected, press the <strong>ENTER</strong> key to proceed.</p><p><img loading="lazy" src="https://i.imgur.com/EUSr4kh.png" class="img_ev3q"></p><p>The PiVPN script will now generate the server keys that WireGuard requires.
All you need to do here is press the <strong>ENTER</strong> key again.</p><p><img loading="lazy" src="https://i.imgur.com/96iIqJU.png" class="img_ev3q"></p><p>This screen will give you a quick rundown about unattended-upgrades and why you should enable them.
Go to the next step by pressing the <strong>ENTER</strong> key.</p><p><img loading="lazy" src="https://i.imgur.com/QjVOVjl.png" class="img_ev3q"></p><p>You can now enable the unattended-upgrades by selecting the <strong>Yes</strong> option.
We highly recommend that you enable these to ensure your Host will download security fixes regulary.
Not enabling this will potentially leave your WireGuard VPN vulnerable to attacks.
Once you have the option you want selected, press the <strong>ENTER</strong> key to confirm it.</p><p><img loading="lazy" src="https://i.imgur.com/eQcgX1e.png" class="img_ev3q"></p><p>You have now successfully installed the WireGuard VPN software to your Host.
This screen will let you know that you still need to create profiles for the users, which we will cover in the next section.
Press the <strong>ENTER</strong> key to continue to the last few steps.</p><p><img loading="lazy" src="https://i.imgur.com/Lst2zXs.png" class="img_ev3q"></p><p>You will be asked whether you want to restart your Host before continuing.
We recommend that you choose the <strong>Yes</strong> option.
Once you have selected to reboot, press the <strong>ENTER</strong> key twice to restart.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-3--creating-your-first-wireguard-profile-on-your-host"><strong>Part 3 – Creating your first WireGuard Profile on your Host</strong><a href="#part-3--creating-your-first-wireguard-profile-on-your-host" class="hash-link" aria-label="Direct link to part-3--creating-your-first-wireguard-profile-on-your-host" title="Direct link to part-3--creating-your-first-wireguard-profile-on-your-host">​</a></h3><p>Now that we have successfully installed the WireGuard software to our Host, we can create a profile for it.</p><p>To be able to create this profile, we will be making use of the PiVPN script again by running the following command:</p><p><strong><code>sudo pivpn add</code></strong></p><p>All you need to do is type in a name for the profile that you are creating. We chose our Host&#x27;s name just to keep it simple and easy to understand.</p><p>Once you have created a profile, it will be stored within the directory specified in the output.</p><p>If you followed the previous steps and used your <strong>Host</strong> username, you will be able to find the config file within the <strong>/home/Host/configs</strong> directory.</p><p>You can use the config file within here to set up your WireGuard clients. However, there is another method which we will go into in the next section.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-4--generating-a-qr-code-for-your-wireguard-profile"><strong>Part 4 – Generating a QR Code for your WireGuard Profile</strong><a href="#part-4--generating-a-qr-code-for-your-wireguard-profile" class="hash-link" aria-label="Direct link to part-4--generating-a-qr-code-for-your-wireguard-profile" title="Direct link to part-4--generating-a-qr-code-for-your-wireguard-profile">​</a></h3><p>In this section, we will show you how to generate a QR code for the WireGuard profile we generated on our Host.</p><p>You will be able to scan this QR code using your device. This saves you from having to copy the config file from your device.</p><p>Luckily for us, the PiVPN software comes with a QR code generator that we can use.</p><p>To generate a QR code for your profile, you will need to start by running the following command:</p><p><strong><code>pivpn -qr PROFILENAME</code></strong></p><p>Make sure you replace <strong>PROFILENAME</strong> with the name you set in the previous section. In our case, this will be <strong>Host</strong>.</p><p><img loading="lazy" src="https://i.imgur.com/0CTCkQp.png" class="img_ev3q"></p><p>You can then scan the generated QR code using your iOS or Android devices by adding a tunnel and create from QR code.</p><p>You can find the WireGuard app on both the Google Play Store and the Apple App Store.</p><p>When scanning the QR code, you will be asked to enter a name for the profile.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="part-5--last-few-important-steps"><strong>Part 5 – Last few important steps</strong><a href="#part-5--last-few-important-steps" class="hash-link" aria-label="Direct link to part-5--last-few-important-steps" title="Direct link to part-5--last-few-important-steps">​</a></h3><p>At this point, you should now have a WireGuard VPN successfully running on your Host while being able to SSH into it remotely from virtually anywhere in the world.</p><p>It is recommended to use Termius as it can store the SSH generated keys safely along with your biometric scans in the same encrypted chip, even in its free to use format.</p><p>Last few steps will be to run the debugging wizard, which will fix any settings issues, with:</p><p><strong><code>pivpn -d</code></strong></p><p>You can also check your UFW and WireGuard status with:</p><p><strong><code>sudo systemctl status wg-quick@wg0.service</code></strong></p><p><strong><code>sudo ufw status verbose</code></strong></p><p>... just to make sure everything is working properly.</p><p><strong>If so you should delete/disable your router&#x27;s IPv4 SSH open/forwarding rule as you no longer need it and leaving it open just exposes your system to a security risk.</strong></p><p>Well… Not quite done yet. Because you wouldn’t want to skip backups right? <strong>RIGHT?!?</strong> Run this command:</p><p><strong><code>pivpn -bk</code></strong></p><p>This will create a backup TGZ file that contains your PiVPN configs and user profiles. The backup file is created in <strong>/home/Host/pivpnbackup</strong>.
Download that file with WinSCP and save it in a secure location – you’ll also want to be sure to make a new backup anytime you make significant changes to your PiVPN configuration.</p><p>If for some reason you need to revert this whole process, the PiVPN script has got you covered once more with the following uninstall command:</p><p><strong><code>pivpn -u</code></strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-static-ip-address-using-nmcli-command-on-ubuntu-2204"><strong>Set Static IP Address using nmcli command on Ubuntu 22.04</strong><a href="#set-static-ip-address-using-nmcli-command-on-ubuntu-2204" class="hash-link" aria-label="Direct link to set-static-ip-address-using-nmcli-command-on-ubuntu-2204" title="Direct link to set-static-ip-address-using-nmcli-command-on-ubuntu-2204">​</a></h2><p>In the terminal, you can utilize the “nmcli” command to set up a Static IP Address on Ubuntu 22.04. The “nmcli” command enables Linux users to control the “NetworkManager”. It can be also used for printing the status of network device status, creating, modifying, deleting, activating, or deactivating network connections.</p><p>For setting up a Static IP Address using the “nmcli” command, follow the below-given step-by-step procedure.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-check-device-name">Step 1: Check device name<a href="#step-1-check-device-name" class="hash-link" aria-label="Direct link to Step 1: Check device name" title="Direct link to Step 1: Check device name">​</a></h4><p>Firstly, press “CTRL+ALT+T” to open up the terminal and then run the following “nmcli” command to check the device name:</p><p><strong><code>nmcli connection show</code></strong></p><p>The given output shows that our device name is “enp0s3”:</p><p><img loading="lazy" src="https://i.imgur.com/V3bFz0S.png" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-create-a-static-connection">Step 2: Create a Static connection<a href="#step-2-create-a-static-connection" class="hash-link" aria-label="Direct link to Step 2: Create a Static connection" title="Direct link to Step 2: Create a Static connection">​</a></h4><p>In the next step, we will create a new static connection named “static ip” for the “enp0s3” device:</p><p><strong><code>sudo nmcli con add type ethernet con-name &#x27;static-ip&#x27; ifname enp0s3 ipv4.method manual ipv4.addresses 192.168.1.102/24 gw4 192.168.1.1</code></strong></p><p><img loading="lazy" src="https://i.imgur.com/2tTPTch.png" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-add-dns-ip-to-static-ip">Step 3: Add DNS IP to static-ip<a href="#step-3-add-dns-ip-to-static-ip" class="hash-link" aria-label="Direct link to Step 3: Add DNS IP to static-ip" title="Direct link to Step 3: Add DNS IP to static-ip">​</a></h4><p>Then, execute the below-given command for adding the DNS IP to the “static-ip” connection:</p><p><strong><code>sudo nmcli con mod static-ip ipv4.dns 192.168.1.1</code></strong></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-activate-the-static-connection">Step 4: Activate the Static connection<a href="#step-4-activate-the-static-connection" class="hash-link" aria-label="Direct link to Step 4: Activate the Static connection" title="Direct link to Step 4: Activate the Static connection">​</a></h4><p>Make sure that the created “static-ip” connection is active and working on your Ubuntu 22.04:</p><p><strong><code>sudo nmcli con up id &#x27;static-ip&#x27;</code></strong></p><p>The below-given output indicates that our “static-ip” connection is successfully activated:</p><p><img loading="lazy" src="https://i.imgur.com/qEo7Dwf.png" class="img_ev3q"></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-verify-the-ip-assignment-to-the-selected-device">Step 5: Verify the IP assignment to the selected device<a href="#step-5-verify-the-ip-assignment-to-the-selected-device" class="hash-link" aria-label="Direct link to Step 5: Verify the IP assignment to the selected device" title="Direct link to Step 5: Verify the IP assignment to the selected device">​</a></h4><p>Now, execute the “ip” command with the “a” option to validate the IP assigned to the “enp0s3” device:</p><p><strong><code>ip a</code></strong></p><p><img loading="lazy" src="https://i.imgur.com/3tuBto4.png" class="img_ev3q"></p><p>Lastly, verify the internet connectivity with the help of the following “ping” command:</p><p><strong><code>ping google.com</code></strong></p><p>As you can see, the given output validates that the configured “static-ip” connection is working perfectly:</p><p><img loading="lazy" src="https://i.imgur.com/ZYvx2N8.png" class="img_ev3q"></p><p>That&#x27;s it, hope you enjoyed yet another Luksoverse tutorial.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Luksoverse/community-docs/tree/main/packages/create-docusaurus/templates/shared/docs/community-guides/vpn-tunnel-setup.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/community-guides/validator-key-stake/eth-gashawk"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Genesis Deposits using GasHawk</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/community-guides/openssh-setup"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">OpenSSH Server</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#part-1---update-your-os" class="table-of-contents__link toc-highlight"><strong>Part 1 - Update your OS</strong></a></li><li><a href="#part-2--install-pivpn" class="table-of-contents__link toc-highlight"><strong>Part 2 – Install PiVPN</strong></a></li><li><a href="#part-3--creating-your-first-wireguard-profile-on-your-host" class="table-of-contents__link toc-highlight"><strong>Part 3 – Creating your first WireGuard Profile on your Host</strong></a></li><li><a href="#part-4--generating-a-qr-code-for-your-wireguard-profile" class="table-of-contents__link toc-highlight"><strong>Part 4 – Generating a QR Code for your WireGuard Profile</strong></a></li><li><a href="#part-5--last-few-important-steps" class="table-of-contents__link toc-highlight"><strong>Part 5 – Last few important steps</strong></a></li><li><a href="#set-static-ip-address-using-nmcli-command-on-ubuntu-2204" class="table-of-contents__link toc-highlight"><strong>Set Static IP Address using nmcli command on Ubuntu 22.04</strong></a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mainnet/complete-node-guide/hardware-build/start-here">Start Your Mainnet Node</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/mainnet/mainnet-info">Mainnet info</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/Community-Archive/community-archive">Community archive</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/community-guides/vpn-setup">Advanced Community Setup</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://t.me/luksoverse" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/AE3KdFhpAQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/luksoverse_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Contribute</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Luksoverse/docs.luksoverse.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://luksoverse.io/contributor/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Luksoverse.io website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 The Luksoverse</div></div></div></footer></div>
<script src="/assets/js/runtime~main.6e41e909.js"></script>
<script src="/assets/js/main.5d32bd4a.js"></script>
</body>
</html>